# Vue 中的 Mixin 和 Hook

## Mixin

Vue 中的 Mixin（混入）是一种可以在多个组件中共享可复用功能的方式。  
它允许开发人员将一组组件选项（如数据、方法、生命周期钩子等）封装为一个 Mixin 对象，然后在多个组件中引入该 Mixin，以便重用这些选项。

mixin 解决了逻辑函数的复用和 vue 组件配置的复用。

Mixin 在 vue 中相当于是组件中的组件。  
和普通 utils 工具方法的区别是 Mixin 可以写 Vue 的一些 watch、生命周期等方法。  
mixin 中除了不能把组件的 template 模板抽出来，其余选项式 api 都可以  
Mixin 中的数据和方法都是独立的，在不同组件之间使用是不会相互影响的。

```js
// 在 vue 中 Mixin 就是一个对象，其中放置一些 vue 组件相应的一些选项式API 和生命周期钩子。
export const mixins = {
  data() {
    return {};
  },
  computed: {},
  created() {},
  mounted() {},
  methods: {},
};

// 在vue组件中使用的时候使用mixins选项注册
import { mixins } from './mixin/index';

export default {
  name: 'App',
  mixins: [mixins],
};
```

注意点：

- mixin 中的生命周期函数会和组件的生命周期函数一起合并执行，先执行 mixin 中的，后执行组件中的；
- mixin 中的 data 数据在组件中也可以使用，同名的 data 也会被组件中的覆盖；
- mixin 中的方法在组件内部可以直接调用，当方法名和组件中的方法名冲突时，优先使用组件中的。

### Mixin 的优缺点

优点：

1. 代码重用：Mixin 可以将一组组件选项抽象出来，使得这些选项可以在多个组件中重复使用，减少了代码的重复编写，提高了开发效率。
2. 组合灵活：通过将多个 Mixin 组合在一起，可以创建出具有不同组合特性的组件。这样，开发人员可以根据需要选择合适的 Mixin 组合，从而实现更灵活的组件组合和功能扩展。
3. 分离关注点：Mixin 可以将一些通用的逻辑和功能从组件中抽离出来，使得组件更专注于自身的核心业务逻辑。这有助于代码的维护和阅读，提高了代码的可读性和可维护性。

缺点：

1. 命名冲突：如果多个 Mixin 中定义了相同的选项（如同名的数据或方法），那么在组件中使用这些 Mixin 时可能会导致命名冲突，产生不可预期的结果。解决这个问题需要更加谨慎地设计和使用 Mixin。
2. 隐式依赖：Mixin 的引入可能会引入一些隐式的依赖关系，使得组件的行为变得不够明确。当多个 Mixin 之间存在相互影响或依赖关系时，可能会增加代码的复杂性和维护成本。
3. 全局影响：Mixin 的修改可能会对所有引入该 Mixin 的组件产生影响。这意味着如果需要修改 Mixin 的某个选项，可能需要同时修改多个组件，增加了修改的复杂性和风险。

因此，在使用 Mixin 时，需要谨慎考虑其设计和使用方式，避免潜在的问题，并合理权衡其带来的优点和缺点。
