# 解决方案类的问题

## 如何实现网页多标签 tab 通讯？

1. WebSocket，需要服务端协助，成本较高，优点是可跨域；
2. localStorage，同域间通讯，简单易用，推荐；
3. SharedWorker，同域间通讯，兼容性差一些，调试也不方便；

## 如何实现网页和 iframe 之间的通讯？

1. 使用 postMessage 通讯；
2. 使用 [MessageChannel](https://developer.mozilla.org/zh-CN/docs/Web/API/MessageChannel) 通讯；

```js
// 网页给iframe里发送消息，iframe_1为所嵌套iframe定义的id
window.iframe_1.contentWindow.postMessage(
  'msg info',
  '指定要发送的域名，* 表示不限制'
);

// 子iframe给父网页里发送消息
window.parent.postMessage('msg info', '指定要发送的域名，* 表示不限制');

// 接收消息
window.addEventListenter('message', (event) => {
  console.info(event.origin); // 判断origin的合法性
  console.info(event.data); // 接收的信息
});
```
