# 网络安全

## 常见的攻击

### 一、XSS 攻击（Cross Site Script 跨站脚本攻击）

手段：将 JS 代码插入到网页内容中，渲染时执行 JS 代码，以获取网页信息。  
场景：在表单提交时，黑客将 JS 代码混入提交，前后段不做处理，在详情页之类的地方，这段 JS 代码就会执行；  
预防：js 的特殊字符替换（前端或者后端）（安装 xss 包解决）

> Vue 和 React 里默认是屏蔽 XSS 攻击的，除非你使用 v-html 或者 dangerous-html 来接收值等

### CSRF（Cross Site Request Rorgery 跨站请求伪造）

手段：黑客诱导用户去访问另一个网站的接口，伪造请求。  
场景：用户登录 A 网站，有了 cookie，黑客诱导用户到 B 网站，并发起 A 网站的请求，A 网站的 API 发现有 cookie，认为是用户自己操作的。钓鱼邮件的操作  
预防：1、严格进行跨域限制，如判断请求来源；2、为 cookie 设置 SameSite，禁止跨域传递 cookie；3、关键接口使用短信验证码

### 三、点击劫持（Click Jacking）

手段：诱导界面上蒙一个透明的 iframe，诱导用户点击。  
预防：不允许 iframe 跨域加载；为我们网站的 Headers 里设置`X-Frame-Options: sameorigin`，这样第三方的网站就允许嵌套我们的网站。

```js
if(top.location.hostname !== self.location.hostname){
  alert('您正在访问不安全的页面，即将跳转到安全页面！')；
  top.location.href = self.location.href;
}
```

### 四、DDoS（Distribute denial-of-service 分布式拒绝服务）

手段：分布式的、大规模的流量访问，使服务器瘫痪。  
预防：软件层不好做，需要硬件预防（如阿里云的 WAF）

### 五、SQL 注入

手段：黑客提交内容时写入 SQL 语句，破坏数据库；  
场景：前后端未分离前常见，分离后就少了。  
预防：处理输入的内容，替换特殊字符。

1. 攻击方式： 输入一个 sql 片段，最终拼接成一段攻击代码；

   ```sql
    -- 正确的语句
    select * from users where username='zhangsan' and password='123';
    -- sql 注入的语句，username 输入(zhangsan' -- )使得password的语句失效了
    select * from users where username='zhangsan' -- ' and password='123';
   ```

2. 预防措施： 使用 mysql 的 escape 函数处理输入内容即可。（mysql 包里 escape 的函数处理）

### 密码加密

1. 攻击方式：获取用户名和密码，再去尝试登录其他系统
2. 预防措施： 将密码加密，即便拿到密码也不知道明文
