# 项目

## 从 0 搭建项目环境，考虑哪些？

1. 代码仓库，发布到哪个 npm 仓库
2. 技术选型，框架，UI 库，Vue React
3. 代码目录的规范
4. 打包构建 webpack 等，做打包优化
5. eslint prettier commit-lint
6. pre-commit git
7. 单元测试
8. CI/CD 流程
9. 开发环境、测试和预发布环境如何搭建？
10. 开发文档
11. 等等
12. 需求分析
13. 服务器
14. 数据库模型
15. 接口设计和规范 Restful API
16. 测试，上线，排期

## SPA 和 MPA 应该如何选择？

SPA 特点：  
功能较多，一个页面展示不完  
以操纵为主，非展示为主  
适合一个综合 Web 应用

SPA 场景：  
大型后台管理系统，如阿里云的 console  
知识库，如语雀、石墨文档  
比较复杂的 WebApp，如外卖 H5

MPA 特点：  
功能较少，一个页面展示完；  
以展示为主，操作较少  
适合一个孤立的页面

MPA 场景：  
分享页，如腾讯文档分享出去的  
新闻详情页，如新闻 App 的详情页，微信公众号发布的页面

## Code review 从哪些方面入手

1. 代码规范（eslint 不是是全能的，不能全检查，如变量命名、代码语义等）；
2. 重复的代码要抽离、复用；
3. 单个函数内容过长，需要拆分；
4. 算法复杂度是否可用？是否可继续优化；
5. 是否有安全漏洞；
6. 扩展性如何？（不能为了扩展而扩展）；
7. 是否和现有的功能重复了；
8. 是否有完善的单元测试；
9. 组件设计是否合理；

持续优化，每次 Code review 的问题要记录下，归纳整理，形成自己的代码规范体系；新加入的成员要提前学习，提前规避；

## 前端统计的范围

1. 访问量 PV；
2. 自定义事件；
3. 性能，错误；

```js
class MyStatistic {
  constructor(productId) {
    this.productId = productId;

    this.initPerformance(); // 性能统计
    this.initError(); // 错误监控
  }

  // 发送统计数据
  send(url, params = {}) {
    params.productId = productId;

    const paramArr = [];
    for (let key in paramArr) {
      const val = params[key];
      paramArr.push(`${key}=${val}`);
    }

    const newUrl = `${url}?${paramArr.join('&')}`;

    // 用img发送请求：1、可跨域；2、兼容性好
    const img = document.createElement('img');
    img.src = newUrl;
  }

  // 初始化性能统计
  initPerformance() {
    const url = 'xxx';
    this.send(url, performance.timing); // 给原始完整数据发给服务端
  }
  // 初始化错误监控
  initError() {
    window.addEventListener('error', (event) => {
      const { error, lineNo, colNo } = event;
      this.error(error, { lineNo, colNo });
    });

    // Promise 未catch住的报错
    window.addEventListener('unhandledrejection', (event) => {
      this.error(new Error(event.reason), { type: 'unhandledrejection' });
    });
  }
  // 页面访问量 pv
  pv() {}
  // 自定义事件
  event(key, val) {
    const url = 'xxx';
    this.send(url);
  }
  // 发送错误
  error(err, info = {}) {
    const url = 'zzz';
    const { message, stack } = err;
    this.send(url, { message, stack, ...info });
  }
}
```
